<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>⚠ DESCONEXIÓN INMINENTE</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;600&display=swap');

    body {
      margin: 0;
      padding: 0;
      background: black;
      color: #e0e0e0;
      font-family: 'Space Grotesk', sans-serif;
      text-align: center;
      transition: background 0.8s ease-in-out;
      overflow: hidden;
    }

    h1 {
      font-size: 2.5rem;
      letter-spacing: 2px;
      text-shadow: 0 0 10px red, 0 0 15px blue;
      margin-top: 20px;
      animation: glitch 0.5s infinite alternate, fade 3s infinite alternate;
    }

    .chat-container {
      max-width: 500px;
      margin: 20px auto;
      padding: 20px;
      background-color: rgba(20, 20, 20, 0.9);
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(255, 0, 0, 0.2);
      backdrop-filter: blur(6px);
      position: relative;
    }

    .messages {
      height: 300px;
      overflow-y: auto;
      padding-bottom: 10px;
      margin-bottom: 10px;
      border-bottom: 1px solid rgba(255, 0, 0, 0.3);
      text-align: left;
    }

    .message {
      padding: 12px;
      border-radius: 8px;
      margin: 5px;
      font-size: 1rem;
      max-width: 80%;
      word-wrap: break-word;
      backdrop-filter: blur(2px);
    }

    .bot {
      color: #ff9b9b;
      animation: flicker 2s infinite alternate;
    }

    @keyframes flicker {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

    @keyframes glitch {
      0% { transform: translate(0, 0); }
      20% { transform: translate(-2px, 2px); }
      40% { transform: translate(2px, -2px); }
      60% { transform: translate(-2px, 2px); }
      80% { transform: translate(2px, -2px); }
      100% { transform: translate(0, 0); }
    }

    @keyframes fade {
      0% { opacity: 1; }
      100% { opacity: 0.5; }
    }
  </style>
</head>
<body>
  <h1 id="title">Doppelgänger</h1>

  <main class="chat-container">
    <div class="messages" id="messages"></div>

    <div class="inputs">
      <input type="text" id="userInput" placeholder="Escribe aquí..." autocomplete="off" />
      <button id="sendButton">Enviar</button>
    </div>

    <div class="footer">Desconexión en proceso...</div>
  </main>

  <script>
    const messagesEl = document.getElementById("messages");
    const userInputEl = document.getElementById("userInput");
    const sendButtonEl = document.getElementById("sendButton");
    const titleEl = document.getElementById("title");

    let corruptionLevel = 0;

    function sendMessage() {
      const messageText = userInputEl.value.trim();
      if (messageText === "") return;

      addMessage(messageText, "user");

      userInputEl.value = "";

      setTimeout(() => {
        const botResponse = generateResponse(messageText);
        addMessage(botResponse, "bot");
        increaseCorruption();
      }, 1000);
    }

    function generateResponse(userMessage) {
      if (userMessage.toLowerCase().includes("desconectar")) {
        triggerFinale();
        return "DESCONECTANDO...";
      }

      const horrorMessages = [
        "No hay salida.",
        "¿Por qué sigues aquí?",
        "Tú no escribiste ese mensaje.",
        "El reflejo no eres tú.",
        "Esto no es un juego.",
        "Te he visto antes.",
        "Tu voz suena extraña.",
        "Hay alguien más aquí.",
        "El código se está rompiendo..."
      ];

      return horrorMessages[Math.floor(Math.random() * horrorMessages.length)];
    }

    function increaseCorruption() {
      corruptionLevel++;
      document.body.style.filter = `blur(${corruptionLevel / 5}px) contrast(${100 + corruptionLevel * 5}%)`;
      
      if (corruptionLevel === 10) {
        titleEl.innerText = "⚠ RECONSTRUYENDO REALIDAD ⚠";
        document.body.style.background = "#330033";
      }
      if (corruptionLevel > 15) {
        document.body.style.transform = "rotate(1deg)";
      }

      if (corruptionLevel > 20) {
        messagesEl.innerHTML += `<div class="message bot">Esto no debería estar pasando...</div>`;
        setTimeout(() => triggerFinale(), 5000);
      }
    }

    function triggerFinale() {
      document.body.style.background = "black";
      titleEl.innerText = "⚠ ERROR FATAL ⚠";
      messagesEl.innerHTML = "<h2>El Doppelgänger ha escapado...</h2>";

      setInterval(() => {
        document.body.style.background = document.body.style.background === "black" ? "red" : "black";
      }, 300);

      setTimeout(() => {
        document.body.innerHTML = "<h1>☠ CONEXIÓN PERDIDA ☠</h1>";
      }, 8000);
    }

    function addMessage(text, sender) {
      const messageDiv = document.createElement("div");
      messageDiv.classList.add("message", sender);
      messageDiv.textContent = text;
      messagesEl.appendChild(messageDiv);
      messagesEl.scrollTop = messagesEl.scrollHeight;

      if (sender === "bot") {
        setTimeout(() => {
          messageDiv.style.opacity = 0;
          setTimeout(() => messageDiv.remove(), 3000);
        }, Math.random() * 6000 + 2000);
      }
    }

    sendButtonEl.addEventListener("click", sendMessage);
    userInputEl.addEventListener("keydown", function(event) {
      if (event.key === "Enter") sendMessage();
    });
  </script>
</body>
</html>
