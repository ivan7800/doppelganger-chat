<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>⚠️ DOPPELGÄNGER PROHIBIDO</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

    body {
      margin: 0;
      padding: 0;
      background: #000;
      color: #00ff00;
      font-family: 'Press Start 2P', cursive;
      text-align: center;
      overflow: hidden;
    }

    h1 {
      font-size: 2rem;
      text-shadow: 0 0 10px #00ff00, 0 0 15px #8800ff;
      margin-top: 20px;
      animation: glitch 3s infinite;
    }

    .chat-container {
      max-width: 500px;
      margin: 20px auto;
      padding: 20px;
      background-color: rgba(0, 0, 0, 0.9);
      border-radius: 12px;
      box-shadow: 0 0 15px #8800ff;
      border: 3px solid #00ff00;
      position: relative;
    }

    .messages {
      height: 300px;
      overflow-y: auto;
      padding-bottom: 10px;
      margin-bottom: 10px;
      border-bottom: 1px solid #00ff00;
      text-align: left;
    }

    .message {
      padding: 12px;
      border-radius: 8px;
      margin: 5px;
      font-size: 0.9rem;
      max-width: 80%;
      word-wrap: break-word;
      font-family: 'Press Start 2P', cursive;
      position: relative;
    }

    .glitch-effect {
      animation: glitchText 0.2s infinite alternate;
    }

    .user {
      background-color: rgba(0, 255, 0, 0.2);
      text-align: right;
      color: #00ff00;
      margin-left: auto;
      border-left: 3px solid #00ff00;
    }

    .bot {
      background-color: rgba(136, 0, 255, 0.2);
      text-align: left;
      color: #8800ff;
      margin-right: auto;
      border-right: 3px solid #8800ff;
      animation: flicker 3s infinite alternate;
    }

    @keyframes glitch {
      0% { transform: translate(0, 0); }
      20% { transform: translate(-2px, 2px); }
      40% { transform: translate(2px, -2px); }
      100% { transform: translate(0, 0); }
    }

    @keyframes glitchText {
      0% { transform: translate(0, 0); }
      50% { transform: translate(-1px, 1px) skewX(5deg); }
      100% { transform: translate(1px, -1px) skewX(-5deg); }
    }
  </style>
</head>
<body>
  <h1 id="title">⚠ DOPPELGÄNGER PROHIBIDO ⚠</h1>

  <main class="chat-container">
    <div class="messages" id="messages"></div>
    <div class="inputs">
      <input type="text" id="userInput" placeholder="Susurra tu pregunta..." autocomplete="off" />
      <button id="sendButton">Consultar</button>
    </div>
  </main>

  <script>
    const messagesEl = document.getElementById("messages");
    const userInputEl = document.getElementById("userInput");
    const sendButtonEl = document.getElementById("sendButton");
    const titleEl = document.getElementById("title");
    let userHistory = [];
    let ritualActive = false;
    let hiddenRitual = false;
    let hintCounter = 0;

    function sendMessage() {
      const messageText = userInputEl.value.trim();
      if (messageText === "") return;

      addMessage(messageText, "user");
      userHistory.push(messageText.toLowerCase());
      userInputEl.value = "";

      setTimeout(() => {
        const botResponse = generateResponse(messageText.toLowerCase());
        addMessage(botResponse, "bot");
      }, 1000);
    }

    function generateResponse(userMessage) {
      if (userMessage.includes("666")) {
        triggerError666();
        return "NO DEBISTE ESCRIBIR ESO.";
      }

      if (userMessage === "manifiéstate") {
        ritualActive = true;
        return "El ritual ha comenzado... pero debes encontrar el siguiente paso.";
      }

      if (userMessage.includes("quién eres")) {
        return "Eres tú. Pero no del todo...";
      }

      if (userMessage.includes("cómo salgo de aquí")) {
        setTimeout(() => { location.reload(); }, 3000);
        return "Demasiado tarde... El otro tú ya ha tomado tu lugar.";
      }

      if (userMessage === "vezreth vezreth vezreth") {
        hiddenRitual = true;
        return "Has despertado algo que no entiende el tiempo... y ahora hay dos de ti.";
      }

      if (hintCounter % 5 === 0) {
        return "Escucha los susurros. Pregunta sobre el 'reflejo distorsionado'...";
      }
      hintCounter++;

      const horrorMessages = [
        "El Doppelgänger te observa...",
        "Algo ha escrito por ti... ¿lo viste?",
        "No recuerdas escribir esto, ¿verdad?",
        "Los textos antiguos hablaban de algo llamado Vezreth...",
        "El último en consultarme nunca regresó... pero alguien parecido apareció en su lugar...",
        "Solo quedan ecos de lo que alguna vez fue tu mente...",
        "No estás escribiendo solo. Algo más está escribiendo contigo...",
        "ɘsoɿʎƚsɘɿ ǫnƃɘ ɿɘɿɘnɘᗡ"
      ];
      return horrorMessages[Math.floor(Math.random() * horrorMessages.length)];
    }

    function triggerError666() {
      document.body.style.background = "purple";
      titleEl.innerText = "⚠ ERROR 666 ⚠";
    }

    function addMessage(text, sender) {
      const messageDiv = document.createElement("div");
      messageDiv.classList.add("message", sender);
      messageDiv.textContent = text;
      messagesEl.appendChild(messageDiv);
      messagesEl.scrollTop = messagesEl.scrollHeight;
    }

    setInterval(() => {
      if (ritualActive || hiddenRitual || Math.random() < 0.3) {
        const botMessage = generateResponse("");
        addMessage(botMessage, "bot");
      }
    }, 7000);

    sendButtonEl.addEventListener("click", sendMessage);
    userInputEl.addEventListener("keydown", function(event) {
      if (event.key === "Enter") {
        event.preventDefault();
        sendMessage();
      }
    });
  </script>
</body>
</html>
